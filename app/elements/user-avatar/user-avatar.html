<link rel="import" href="../../bower_components/iron-image/iron-image.html">

<dom-module id="strapieno-user-avatar">
  <style>
    iron-image {
      display: inline-block;
      position: relative;
      border-radius: 50%;
      overflow: hidden;
      z-index: 0;
    }

  </style>
  <template>
    <iron-image
            id="image"
            width="[[width]]"
            height="[[height]]"
            sizing="[[sizing]]"
            src="{{url}}"
            placeholder="[[placeholder]]"
            preload
            fade>
    </iron-image>
  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'strapieno-user-avatar',

        properties: {
          user: {
            type: Object,
            value: function() { return {}; }
          },

          url: {
            type: String,
            readOnly: true,
            notify: true
          },

          placeholder: {
            type: String
          },

          width: {
            type: Number,
            value: 84
          },

          sizing: {
            type: String,
            value: null
          },

          height: {
            type: Number,
            value: 84
          }
        },

        observers: [
          'userAvatarChanged(user.avatar)'
        ],

        userAvatarChanged: function (value) {
        //  console.log('CAMBIA STA CAZZO DI FOTO', value);
         if(value) {
           this._setUrl(value);
         }
        }
      });
    })();
  </script>

</dom-module>