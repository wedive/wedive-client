<script src="../../bower_components/page/page.js"></script>
<script>

  window.addEventListener('WebComponentsReady', function() {

    function scrollToTop(ctx, next) {
      switch (true) {
        case ctx.params.placeId != undefined:
          scrollManager(ctx, 0, 360);
          break;
        default:
          element = document.querySelector('partial-footer');
          element._rePosition();

      }
      next();
    };

    function scrollManager(ctx, startIndex, endIndex) {
      if (ctx.path != window.location.pathname) {
        window.scrollTo(startIndex, endIndex);
      }
    };

    /**
     * Home
     */
    page('/', scrollToTop, function(ctx) {
      app.route = ctx.routeName = 'dashboard';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });

    /**
     * Place
     */
    page('/place/:placeId', scrollToTop, function(ctx) {

      app.route = ctx.routeName =  'place';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });


    /**
     * Place
     */
    page('/privacy', scrollToTop, function(ctx) {

      app.route = ctx.routeName =  'privacy';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });

    /**
     * Validate mail
     */
    page('/confirm-email/:token', scrollToTop, function(ctx) {

      app.route = ctx.routeName =  'confirm-email';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });

    /**
     * Reset password
     */
    page('/reset-password/:token', scrollToTop, function(ctx) {

      app.route = ctx.routeName =  'reset-password';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });

    /**
     * Diary
     */
    page('/diary', scrollToTop, function(ctx) {

      app.route = ctx.routeName =  'diary';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });

    /**
     * Diary edit
     */
    page('/diary/edit/:id', scrollToTop, function(ctx) {

      app.route = ctx.routeName =  'diary-edit';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });

    /**
     * Diary add
     */
    page('/diary/add', scrollToTop, function(ctx) {

      app.route = ctx.routeName =  'diary-add';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();
    });

    page('/forbidden', scrollToTop, function(ctx) {
      app.route = ctx.routeName =  'forbidden';
      app.routeParams = ctx;
      app.notifyPath('routeParams', ctx);
      console.groupCollapsed('ROUTE');
      console.log('NAME : ' + app.route);
      console.log('PARAMS:',   app.routeParams);
      console.groupEnd();

    });

    page('*', scrollToTop, function(ctx) {
      app.route = ctx.routeName =  'not-found';

    });

    /**
     * Settings Routing
     */
    page({
      hashbang: false // Not insert # berfor sub route
    });
  });
</script>
