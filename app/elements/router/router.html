<link rel="import" href="../routing.html">

<link rel="import" href="../pages/home/mission-section.html">
<link rel="import" href="../pages/home/maps-section.html">
<link rel="import" href="../pages/home/team-section.html">
<link rel="import" href="../pages/home/grid-section.html">

<link rel="import" href="../pages/place/profile.html">

<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../../bower_components/iron-image/iron-image.html">

<dom-module id="strapieno-router">
  <template>
    <style>

    ::content section {
      padding-top: 120px;
    }
    </style>
    <iron-pages attr-for-selected="data-route" selected="{{route}}">
      <!-- Home page -->
      <section data-route="dashboard">
        <apigility-rest-api-client id="restPlaces" collection-name="places" collection="{{places}}" page-size="300" page="1">
          <apigility-resource resource-name="rest/place"></apigility-resource>
        </apigility-rest-api-client>
        <mission-section></mission-section>
        <maps-section places="{{places}}"></maps-section>
        <team-section></team-section>
        <grid-section places="{{places}}"></grid-section>
      </section>

      <section data-route="place">
        <place-profile place-id="{{placeId}}"></place-profile>
      </section>


    </iron-pages>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'strapieno-router',

        properties: {

          route: {
            type: String
          },

          routeParams: {
            type: Object,
            value: function () {return {};},
            observer: '_routeParamsChanged'
          }
        },

        ready: function () {

          var query = new Array();
          query['hide'] = ['description', 'postal_address'];
          this.querySelector('apigility-rest-api-client').getAll(query);
        },

        addQueryParmsHandler: function (e) {
          console.log('PRESEND', e);
        },

        _routeParamsChanged:  function (value) {

          switch(value.routeName) {
            case 'dashboard':
              break;
            case 'place':
              this.placeId = value.params.placeId;
              this.loadPlace = true;
              break;
            default:
              break;
          }
        }
      });
    })();
  </script>

</dom-module>